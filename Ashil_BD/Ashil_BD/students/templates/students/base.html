<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>{% block title %}Ashil_BD{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    {% load static %}
    <link rel="stylesheet" href="{% static 'students/style.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-light">
<div class="app-container">
    <!-- –°–ê–ô–î–ë–ê–† –°–õ–ï–í–ê -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a class="navbar-brand" href="{% url 'dashboard' %}">
                <span class="logo-text">SMART</span>
            </a>
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="bi bi-chevron-left"></i>
            </button>
        </div>

        <!-- –ú–ï–ù–Æ -->
        <nav class="nav-menu">
            <a href="{% url 'dashboard' %}" class="nav-link">
                <i class="bi bi-speedometer2"></i>
                <span>–î–∞—à–±–æ—Ä–¥</span>
            </a>
            
            <a href="{% url 'student_list' %}" class="nav-link">
                <i class="bi bi-people"></i>
                <span>–°—Ç—É–¥–µ–Ω—Ç—ã</span>
            </a>
            
            <a href="{% url 'course_list' %}" class="nav-link">
                <i class="bi bi-journal-bookmark"></i>
                <span>–ö—É—Ä—Å—ã</span>
            </a>
            
            <a href="{% url 'document_list' %}" class="nav-link">
                <i class="bi bi-folder"></i>
                <span>–§–∞–π–ª—ã</span>
            </a>
            
            <a href="#" class="nav-link" onclick="alert('–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!'); return false;">
                <i class="bi bi-calendar-event"></i>
                <span>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
            </a>
            
            <a href="{% url 'chat_room' %}" class="nav-link">
                <i class="bi bi-chat-dots"></i>
                <span>–ß–∞—Ç</span>
                <span class="badge bg-danger">3</span>
            </a>
            
            <!-- –ò–ì–†–ê -->
            <a href="{% url 'snake_game' %}" class="nav-link game-link">
                <i class="bi bi-joystick"></i>
                <span>üéÆ –ó–º–µ–π–∫–∞</span>
            </a>
            
            <div class="menu-divider"></div>
            
            <a href="/admin/" class="nav-link">
                <i class="bi bi-gear"></i>
                <span>–ê–¥–º–∏–Ω–∫–∞</span>
            </a>
        </nav>

        <!-- –§–£–¢–ï–† –°–ê–ô–î–ë–ê–†–ê -->
        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">
                    <i class="bi bi-person-circle"></i>
                </div>
                <div class="user-details">
                    <strong>{% if user.is_authenticated %}{{ user.username }}{% else %}–ì–æ—Å—Ç—å{% endif %}</strong>
                    <small>{% if user.is_authenticated %}–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä{% else %}–í–æ–π–¥–∏—Ç–µ{% endif %}</small>
                </div>
            </div>
            {% if user.is_authenticated %}
            <a href="{% url 'logout' %}" class="logout-btn">
                <i class="bi bi-box-arrow-right"></i>
                <span>–í—ã–π—Ç–∏</span>
            </a>
            {% else %}
            <a href="{% url 'login' %}" class="logout-btn">
                <i class="bi bi-box-arrow-in-right"></i>
                <span>–í–æ–π—Ç–∏</span>
            </a>
            {% endif %}
        </div>
    </aside>

    <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ -->
    <main class="main-content" id="mainContent">
        <!-- –í–ï–†–•–ù–ò–ô –•–ï–î–ï–† -->
        <header class="top-header">
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle">
                    <i class="bi bi-list"></i>
                </button>
                <h1 class="page-title">{% block page_title %}–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è{% endblock %}</h1>
            </div>
            
            <div class="header-right">
                <!-- –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø -->
                <div class="notification-dropdown">
                    <button class="notification-btn" id="notificationBtn">
                        <i class="bi bi-bell"></i>
                        <span class="badge bg-danger">5</span>
                    </button>
                    <div class="notification-dropdown-content">
                        <h6>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h6>
                        <div class="notification-item">
                            <i class="bi bi-chat-text text-primary"></i>
                            <div>
                                <p>–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ</p>
                                <small>2 –º–∏–Ω—É—Ç—ã –Ω–∞–∑–∞–¥</small>
                            </div>
                        </div>
                        <a href="#" class="see-all">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ</a>
                    </div>
                </div>
                
                <!-- –¢–ï–ú–ê -->
                <button class="theme-toggle" id="themeToggle">
                    <i class="bi bi-moon"></i>
                </button>
            </div>
        </header>

        <!-- –ö–û–ù–¢–ï–ù–¢ -->
        <div class="content-container">
            {% if messages %}
            <div class="messages-container">
                {% for m in messages %}
                <div class="alert alert-{{ m.tags }} alert-dismissible fade show">
                    {{ m }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                {% endfor %}
            </div>
            {% endif %}

            {% block content %}{% endblock %}
        </div>
        
        <!-- –§–£–¢–ï–† -->
        <footer class="main-footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <p class="mb-0">¬© 2024 Ashil_BD</p>
                    </div>
                    <div class="col-md-6 text-end">
                        <span class="text-muted">
                            <i class="bi bi-clock"></i> {% now "H:i" %}
                        </span>
                    </div>
                </div>
            </div>
        </footer>
    </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const sidebar = document.getElementById('sidebar');
    const mainContent = document.getElementById('mainContent');
    const menuToggle = document.getElementById('menuToggle');
    const sidebarToggle = document.getElementById('sidebarToggle');
    
    menuToggle.addEventListener('click', function() {
        sidebar.classList.toggle('collapsed');
        mainContent.classList.toggle('expanded');
        localStorage.setItem('sidebarCollapsed', sidebar.classList.contains('collapsed'));
    });
    
    sidebarToggle.addEventListener('click', function() {
        sidebar.classList.toggle('collapsed');
        mainContent.classList.toggle('expanded');
        localStorage.setItem('sidebarCollapsed', sidebar.classList.contains('collapsed'));
    });
    
    if (localStorage.getItem('sidebarCollapsed') === 'true') {
        sidebar.classList.add('collapsed');
        mainContent.classList.add('expanded');
    }
    
    // –¢–ï–ú–ê
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', function() {
        document.body.classList.toggle('dark-theme');
        const icon = this.querySelector('i');
        if (document.body.classList.contains('dark-theme')) {
            icon.classList.remove('bi-moon');
            icon.classList.add('bi-sun');
            localStorage.setItem('theme', 'dark');
        } else {
            icon.classList.remove('bi-sun');
            icon.classList.add('bi-moon');
            localStorage.setItem('theme', 'light');
        }
    });
    
    if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-theme');
        themeToggle.querySelector('i').classList.remove('bi-moon');
        themeToggle.querySelector('i').classList.add('bi-sun');
    }
});
</script>
{% block extra_js %}{% endblock %}
</body>
</html>