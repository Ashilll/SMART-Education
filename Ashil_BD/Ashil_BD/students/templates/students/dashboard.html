{% extends 'students/base.html' %}
{% block title %}–î–∞—à–±–æ—Ä–¥{% endblock %}

{% block content %}
<div class="container-fluid">
    <h1 class="mb-4">üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
    
    <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card text-white bg-primary">
                <div class="card-body">
                    <h4>{{ total_students }}</h4>
                    <p>–°—Ç—É–¥–µ–Ω—Ç–æ–≤</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-success">
                <div class="card-body">
                    <h4>{{ total_courses }}</h4>
                    <p>–ö—É—Ä—Å–æ–≤</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-info">
                <div class="card-body">
                    <h4>{{ total_teachers }}</h4>
                    <p>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-warning">
                <div class="card-body">
                    <h4>{{ avg_score }}</h4>
                    <p>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</p>
                </div>
            </div>
        </div>
    </div>

    <!-- –¢–æ–ø —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ -->
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5>üèÜ –¢–æ–ø —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</h5>
                </div>
                <div class="card-body">
                    {% for student in top_students %}
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span>{{ student.name }}</span>
                        <span class="badge bg-success">{{ student.avg_grade|floatformat:1 }}</span>
                    </div>
                    {% empty %}
                    <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ–± –æ—Ü–µ–Ω–∫–∞—Ö</p>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫—É—Ä—Å–∞–º -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5>üìö –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫—É—Ä—Å–∞–º</h5>
                </div>
                <div class="card-body">
                    {% for course in courses_stats %}
                    <div class="mb-3">
                        <h6>{{ course.title }}</h6>
                        <div class="d-flex justify-content-between">
                            <small>–°—Ç—É–¥–µ–Ω—Ç–æ–≤: {{ course.student_count }}</small>
                            <small>–°—Ä. –±–∞–ª–ª: 
                                {% if course.avg_grade %}
                                <span class="badge bg-{{ course.get_avg_color }}">{{ course.avg_grade|floatformat:1 }}</span>
                                {% else %}-{% endif %}
                            </small>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
<!-- –¢–ï–°–¢–û–í–ê–Ø –ö–ù–û–ü–ö–ê -->
<div class="text-center mt-5">
    <button class="btn btn-primary btn-lg btn-animated pulse">
        <i class="bi bi-magic me-2"></i>–í–æ–ª—à–µ–±–Ω–∞—è –∫–Ω–æ–ø–∫–∞
    </button>
</div>